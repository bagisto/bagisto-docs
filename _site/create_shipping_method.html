<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Creating shipping method-Bagisto</title>
        <link rel="stylesheet" href="assets/scss/layout.css" />
        <link rel="stylesheet" href="/assets/css/syntax.css" />
        <link rel="icon" sizes="16x16" href="assets/icons/favicon.ico" />
    </head>
    <body>
        <div class="container">
            <div class="content-wrapper">
                <header class="header">
    <div class="logo-wrapper">
        <a href="/">
            <img class="logo" src="assets/images/logo.png" />
        </a>
        <span>Docs</span>
    </div>

    <nav class="menu-list">
        <ul>
            <li>
                <a class="nav-link" href="https://forums.bagisto.com/">Forum</a>
            </li>
            <li>
                <a class="nav-link" href="https://bagisto.com/en/blog/">Blogs</a>
            </li>
        </ul>
    </nav>
</header>

                <div class="content">
                    <div class="side-menu">
                        <div class="sidebar">
    <ul>
        <li class="menu-heading">
            <a href="index.html">Introduction</a>

            <div class="horizontal-rule"></div>

            <ul class="sub-menu">
                <li>
                    <a href="#requirements">Requirements</a>
                </li>

                <li>
                    <a href="#installation">Installation & configuration</a>
                </li>

                <li>
                    <a href="#directory_structure">Directory structure</a>
                </li>
            </ul>
        </li>

        <!-- Module Development -->
        <li class="menu-heading">
            <a href="create_module.html">Package development</a>
            <div class="horizontal-rule"></div>

            <ul class="sub-menu">
                <li>
                    <a href="#how-to-create-module">Creating a package</a>
                </li>

                <li>
                    <a href="#add-menu">Adding menu in backend & storefront</a>
                </li>

                <li>
                    <a href="#create-acl">Creating ACL</a>
                </li>

                <li>
                    <a href="#custom-configuration">Custom configuration</a>
                </li>

                <li>
                    <a href="#create_models">Creating models</a>

                    <ul>
                        <li>
                            <a href="">Contracts, repositories & proxies</a>
                        </li>

                        <li>
                            <a href="#store-data-through-repository">
                                Store data with repository
                            </a>
                        </li>
                    </ul>

                </li>
            </ul>
        </li>

        <!-- Advanced Topics -->

        <li class="menu-heading">
            <a href="override-core-model.html">Advance topics</a>
            <div class="horizontal-rule"></div>

            <ul class="sub-menu">
                <li>
                    <a href="override-core-model.html">Override core models</a>
                </li>

                <li>
                    <a href="create_theme.html">Creating themes</a>
                </li>

                <li>
                    <a href="create_shipping_method.html">Creating shipping method</a>
                </li>

                <li>
                    <a href="create_payment_method.html">Creating Payment method</a>
                </li>

                <li>
                    <a href="render_event.html">View render event</a>
                </li>

                <li>
                    <a href="events.html">Events</a>
                </li>

                <li>
                    <a href="listen_event.html">Listen existing events</a>
                </li>

                <li>
                    <a href="data_grid.html">Data Grid</a>
                </li>
            </ul>
        </li>
        
        <li class="menu-heading">
            <a href="bagisto_api.html">Bagisto Web APIs</a>

            <div class="horizontal-rule"></div>

            <ul class="sub-menu">
                    <!-- <li><a href="api_call_bagisto.html">Generate A Request</a></li> -->
                    <li><a href="api_category.html">Categories</a></li>
                    <li><a href="api_product.html">Products</a></li>
                    <li><a href="api_product_review.html">Product's Reviews</a></li>
                    <li><a href="api_customer.html">Customers</a></li>
                    <li><a href="api_customer_review.html">Customer's Reviews</a></li>
                    <li><a href="api_customer_addresses.html">Addresses</a></li>
                    <li><a href="api_order.html">Orders</a></li>
                    <li><a href="api_invoice_shipment.html">Invoices & Shipments</a></li>
                    <li><a href="api_cart.html">Shopping Cart</a></li>
            </ul>
        </li>
    </ul>
</div>

                    </div>

                    <div class="right-content">
                        <h2 id="shipping-method-edit-on-github">Shipping Method<span class="edit-github"><img src="/assets/images/icons/Icon-Pencil-Large.svg" /> <a href="https://github.com/bagisto/bagisto-docs/blob/master/create_shipping_method.md">edit on github</a></span></h2>

<p>I hope that you know that how to create package, if not(refer ( <a href="/create_module.html">Package development</a>), and I will skip package development step</p>

<!-- ### Step-1

* Inside packages folder of bagisto, create a folder of your company namespace and inside it create a folder with your package name.
Ex – Here namespace is specified as ACME
packages/ACME/HelloWorldPackage

### Step-2
* Inside your package create a file named as package.json and a folder named as 'src', we will use it later.

### Step-3
* Inside ‘src’ folder create a folder named as ‘Providers’ and under it create a file named as ‘PackagenameServiceProvider.php’.

    Ex – HelloWorldServiceProvider.php

    This Service Provider (HelloWorldServiceProvider.php) consist two methods.
    1. boot
    2. register

''' <?php

namespace ACME\HelloWorld\Providers;

use Illuminate\Support\ServiceProvider;

/**
 * HelloWorld service provider
 *
 * @author    Jane Doe <janedoe@gmail.com>
 * @copyright 2018 Webkul Software Pvt Ltd (http://www.webkul.com)
 */
class HelloWorldServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap services.
     *
     * @return void
     */
    public function boot()
    {

    }

    /**
     * Register services.
     *
     * @return void
     */
    public function register()
    {

    }
}


### Step-4

* Now you need to register this service provider, for which open ‘app.php’ file inside ‘config’ folder of root & add your service provider inside ‘providers’ array.

    'providers' => [

    //ACME package

    ACME\HelloWorld\Providers\HelloWorldServiceProvider::class,

    ],


### Step-5
 * Now we need to add our package to ‘composer.json’ file of our project root directory for autoloading in psr-4.

    "psr-4": {

        "ACME\\HelloWorld\\": "packages/ACME/HelloWorld"

    }


### Step-6
* Now we are going to add some routing & views to our package.

    1) For route: create a ‘Http’ folder inside ‘src’ folder of your package & inside this folder (Http) create a file name as ‘routes.php’. In this file, we can create routes of our project & route file name can be according to need. For Example: admin-routes.php, shop-routes.php.

Now, we need to register our route file to service provider’s boot method i.e. HelloWorldProvider.php

    public function boot()

    {
        include __DIR__ . '/../Http/routes.php';

    }

To load routes, you can also use ‘loadRoutesFrom’ method.

2) For view: Create a ‘Resources’ folder inside ‘src’ folder of your project.

Inside ‘Resources’ folder create a folder name as ‘views’.

Now, in this ‘views’ folder, we can create a views for our package. We can create multiple folder inside view to distinguish
views according to need.

Right, Now we are going to create a folder ‘helloworld’ inside the views. In this ‘helloworld’ folder we will create a file name as helloworld.blade.php.

Now just like route file, we also need to register our view folder inside serviceprovider to specify path where views are located.

 public function boot()

 {

    $this->loadViewsFrom(__DIR__ . '/../Resources/views', 'helloworld');

 }


### Step-7
* Now, we need to create route & render a view on that route.

Inside routes.php file create a simple route to render view as below.

```<?php

 Route::view('/hello-world', 'helloworld::helloworld.helloworld');

Now, you can append ‘hello-world’ to your local path in the browser's url to see the output.



### Step-8

* Now, we are going to create language file for our package.

For this create a ‘lang’ folder inside ‘Resources’ folder.

Inside this lang folder, you can create a different folder for languages like for English 'en' , Hindi ‘in’ etc. Right now, we will create a folder name ‘en’ & inside
the ‘en’ folder, create a file name as ‘app.php’.

Now, we need to register the language file to our service provider as we did previously.

public function boot()

{

    $this->loadTranslationsFrom(__DIR__ . '/../Resources/lang', 'helloworld');

}

Now we can write translation in app.php like below.

return [
    'hello-world' => [
        'name' => 'Jane Doe'
    ]
];

### Step-9

->Now we will add Database to our package.

Create a ‘Database’ folder inside ‘src’ folder & inside ‘Database’ create ‘Migrations’ & ‘Seeders’ folder.

In Migrations, create table migrations & seeders for your packages in respective folders. Now, we need to add migrations to our service provider to load them.

 public function boot()

 {

     $this->loadMigrationsFrom(__DIR__ .'/../Database/Migrations');

 }


### Step-11

    Now, it's time to create controllers for our packages. To create controllers, we can create 'Controllers' folder inside 'Http' folder e.g., UserController.php


class UserController extends Controller
{

}


Here, as you can see the controller 'UserController.php' extends the class Controller. Below,is the code for Controller class


`<?php

namespace ACME\HelloWorld\Http\Controllers;

use Illuminate\Foundation\Bus\DispatchesJobs;
use Illuminate\Routing\Controller as BaseController;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Foundation\Auth\Access\AuthorizesRequests;

class Controller extends BaseController

{

    use AuthorizesRequests, DispatchesJobs, ValidatesRequests;

}

## How to Add Menu in Admin/Customer <a id="add-menu"></a>

### Step-12
-> Now, we will show how to add menu in Admin.
For this one we need to create a ‘Config’ folder inside ‘src’.
Inside this src folder, create a file name as 'menu.php'.

`<?php

return [

    [

        'key' => 'helloworld',      // uniquely defined key for menu-icon

        'name' => 'Hello World',    //  name of menu-icon

        'route' => 'helloworld.index',  // the route for your menu-icon

        'sort' => 1,    // Sort number on which your menu-icon should display

        'icon-class' => 'dashboard-icon',   //class of menu-icn

    ]

];

?>

 Here, as we can see these are in 'key' => 'value' pairs where

Now for that route we need to create a controller.

So inside Controllers we will create HelloWorldController.php.

`class HelloWorldController extends Controller

{

    protected $_config;

    public function __construct()

    {

        $this->_config = request('_config');

    }

    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */

    public function index()

    {

        return view($this->_config['view']);

    }

}

## How to Create routes in Bagisto? <a id="create-routes"></a>

For the route we will create a name route as

    Route::get('hello-dashboard',

    'ACME\HelloWorld\Http\Controllers\HelloWorldController@index')->defaults('_config',

    ['view' => 'helloworld::helloworld.index'

    ])->name('helloworld.index');


After creating controller & route we need to merge this menu.php folder with core menu file.For this purpose we will use method  ‘mergeConfigFrom’ method in our Service Provider register() method.


public function register()

{

    $this->mergeConfigFrom(

          dirname(__DIR__) . '/Config/menu.php', 'menu.admin'

     );

}

## Custom Configuration <a id="custom-configuration"></a>

Creating a custom configuration eases the task for developer or any non-developer person. It lets you option of enable/disable with the dropdown or any input *type* attribute. Generally, in bagisto, you can find it in admin panel **Configuration menu** .

### Steps to create custom configuration

* To create custom configuration for your application, you just need to create system.php file under *config* folder of your package.

* Inside the file, you can include the below code as shown in image

![Custom Configuration file](/assets/images/Bagisto_Docs_Images/custom-configuration.png){: height="50%" width="100%"}


### Explanation for the keys:

* **key** : these values provided are unique and nested with '.' (dot) operator. After creation of two nested, other keys written are display in browser in form of accordian {figure needed}

* **name** : these keys accept the value as placeholder of your configuration. Generally, in bagisto, we consider writing it using translation.

* **sort** : These key accept the sort position for the configuration menu.

* **fields** : These key accepts the array for the value of custom configuration.

## Render View for custom menu <a id="view-render-for-menu"></a>

Now, the menu will be added in your menu bar. -->

<h2 id="steps-to-create-shipping-methods">Steps to create shipping methods</h2>

<ul>
  <li>
    <p>User need to create a file named as <code class="highlighter-rouge">carriers.php</code> at <code class="highlighter-rouge">src/config</code> path in the package. Here, we are going to specify what to include in your <code class="highlighter-rouge">carriers.php</code> file.</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">&lt;?php</span>

  <span class="k">return</span> <span class="p">[</span>
      <span class="s1">'FedEx'</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">'code'</span> <span class="o">=&gt;</span> <span class="s1">'fedex'</span><span class="p">,</span>
          <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'FedEx'</span><span class="p">,</span>
          <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'FedEx Shipping'</span><span class="p">,</span>
          <span class="s1">'active'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'per_unit'</span><span class="p">,</span>
          <span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="s1">'ACME\FedEx\Carriers\FedEx'</span><span class="p">,</span>
          <span class="p">]</span>
  <span class="p">];</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="parameters-needed-for-explanation">Parameters needed for explanation</h3>

<ol>
  <li>
    <p>code : unique value used for referring the particular menu</p>
  </li>
  <li>
    <p>title : label/name to display at user interface</p>
  </li>
  <li>
    <p>description : about your shipping method.</p>
  </li>
  <li>
    <p>active : enable/disable option for shipping method</p>
  </li>
  <li>
    <p>type : these field specifies that the shipping method apply as per_unit or
per_order</p>
  </li>
  <li>
    <p>class : path specified with filename ‘namespace\package-name\Carriers-folder\filename’</p>
  </li>
</ol>

<ul>
  <li>
    <p>And, <code class="highlighter-rouge">Carriers</code> named folder inside <code class="highlighter-rouge">src</code> folder. We will now create a file name as our shipping method name for better understandability inside Carriers folder e.g., Fedex.php</p>

    <ol>
      <li>
        <p>File <code class="highlighter-rouge">Fedex.php</code> will extends AbstractShipping class which is defined at <code class="highlighter-rouge">Webkul\Shipping\Carriers\AbstractShipping</code>. Inside this file, the methods are defined that you can use while creating shipping method.</p>
      </li>
      <li>
        <p>Now, you can write all operations needed for your shipping method in <code class="highlighter-rouge">Fedex.php</code> file</p>
      </li>
    </ol>
  </li>
</ul>

                    </div>
                </div>
            </div>
        </div>
    </body>
</html>