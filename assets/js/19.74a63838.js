(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{257:function(a,t,e){a.exports=e.p+"assets/img/create-image-ec2.8b5ede7a.png"},258:function(a,t,e){a.exports=e.p+"assets/img/target-group.98f7415d.png"},259:function(a,t,e){a.exports=e.p+"assets/img/create-target-group.9b7b3385.png"},260:function(a,t,e){a.exports=e.p+"assets/img/create-loadbalancer.1f352060.png"},261:function(a,t,e){a.exports=e.p+"assets/img/loadbalancer-port.9e77b96d.png"},262:function(a,t,e){a.exports=e.p+"assets/img/loadbalancer-port-80.540ede6d.png"},263:function(a,t,e){a.exports=e.p+"assets/img/loadbalancer-result.9c0b7fbd.png"},709:function(a,t,e){"use strict";e.r(t);var s=e(10),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"load-balancing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#load-balancing"}},[a._v("#")]),a._v(" Load Balancing")]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#introduction"}},[a._v("Introduction")])]),t("li",[t("a",{attrs:{href:"#bagisto-with-alb-setup-on-aws"}},[a._v("Bagisto with ALB Setup on AWS")]),t("ul",[t("li",[t("a",{attrs:{href:"#dedicated-database-server-setup"}},[a._v("Dedicated Database Server Setup")])]),t("li",[t("a",{attrs:{href:"#s3-bucket-configuration-for-bagisto"}},[a._v("S3 Bucket Configuration for Bagisto")])]),t("li",[t("a",{attrs:{href:"#bagisto-server-setup"}},[a._v("Bagisto Server Setup")])]),t("li",[t("a",{attrs:{href:"#create-ami-for-bagisto-application"}},[a._v("Create AMI for Bagisto Application")])]),t("li",[t("a",{attrs:{href:"#configure-target-group"}},[a._v("Configure Target Group")])]),t("li",[t("a",{attrs:{href:"#create-and-configure-application-load-balancer-alb"}},[a._v("Create and Configure Application Load Balancer (ALB)")])]),t("li",[t("a",{attrs:{href:"#verify-and-test-the-entire-setup"}},[a._v("Verify and Test the Entire Setup")])])])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"introduction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[a._v("#")]),a._v(" Introduction")]),a._v(" "),t("p",[a._v("This guide provides a step-by-step approach to deploying Bagisto on AWS with an Application Load Balancer (ALB) for improved scalability and high availability. By setting up a dedicated database server, integrating Amazon S3 for media storage, and configuring an AMI-based auto-scaling setup, you can ensure that Bagisto can handle increased traffic efficiently.")]),a._v(" "),t("p",[a._v("The process includes:")]),a._v(" "),t("ul",[t("li",[a._v("Setting up a dedicated MySQL server for better performance.")]),a._v(" "),t("li",[a._v("Deploying Bagisto on multiple EC2 instances behind a Load Balancer.")]),a._v(" "),t("li",[a._v("Using Amazon S3 for storage instead of local file storage.")]),a._v(" "),t("li",[a._v("Creating an AMI to easily scale new instances.")]),a._v(" "),t("li",[a._v("Configuring an Application Load Balancer (ALB) for traffic distribution.")]),a._v(" "),t("li",[a._v("Setting up SSL and domain configuration for secure access.")]),a._v(" "),t("li",[a._v("This setup ensures a scalable, fault-tolerant, and high-performance Bagisto application. ðŸš€")])]),a._v(" "),t("h2",{attrs:{id:"bagisto-with-alb-setup-on-aws"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bagisto-with-alb-setup-on-aws"}},[a._v("#")]),a._v(" Bagisto with ALB Setup on AWS")]),a._v(" "),t("h3",{attrs:{id:"dedicated-database-server-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dedicated-database-server-setup"}},[a._v("#")]),a._v(" Dedicated Database Server Setup")]),a._v(" "),t("h4",{attrs:{id:"launch-ec2-instance-for-mysql-database"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#launch-ec2-instance-for-mysql-database"}},[a._v("#")]),a._v(" Launch EC2 Instance for MySQL Database")]),a._v(" "),t("ul",[t("li",[a._v("Launch an EC2 instance for MySQL database.")]),a._v(" "),t("li",[a._v("Assign an Elastic IP to the EC2 instance.")])]),a._v(" "),t("h4",{attrs:{id:"install-and-configure-mysql-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-and-configure-mysql-server"}},[a._v("#")]),a._v(" install and Configure MySQL Server")]),a._v(" "),t("ul",[t("li",[a._v("SSH into the EC2 instance and run "),t("code",[a._v("apt-get update")]),a._v(".")]),a._v(" "),t("li",[a._v("Install MySQL server:")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mysql-server\n")])])]),t("ul",[t("li",[a._v("Secure the MySQL installation and create the database:")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" mysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("\nCREATE DATABASE bagistodb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nCREATE "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'bagistouser'")]),a._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'<your-db-password>'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nGRANT ALL ON bagistodb.* TO "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'bagistouser'")]),a._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" WITH GRANT OPTION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nSET GLOBAL log_bin_trust_function_creators "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nFLUSH PRIVILEGES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nEXIT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("h4",{attrs:{id:"update-mysql-bind-address"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-mysql-bind-address"}},[a._v("#")]),a._v(" Update MySQL Bind Address")]),a._v(" "),t("ul",[t("li",[a._v("Modify the bind address from 127.0.0.1 to 0.0.0.0 in /etc/mysql/mysql.conf.d/mysqld.cnf.")])]),a._v(" "),t("h4",{attrs:{id:"restart-mysql-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#restart-mysql-server"}},[a._v("#")]),a._v(" Restart MySQL Server")]),a._v(" "),t("ul",[t("li",[a._v("Restart the MySQL service:")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl restart mysql\n")])])]),t("h4",{attrs:{id:"open-mysql-port-3306-in-security-group"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#open-mysql-port-3306-in-security-group"}},[a._v("#")]),a._v(" Open MySQL Port (3306) in Security Group")]),a._v(" "),t("ul",[t("li",[a._v("Modify the security group for this EC2 instance to allow inbound traffic on port 3306.")])]),a._v(" "),t("h4",{attrs:{id:"verify-database-connectivity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verify-database-connectivity"}},[a._v("#")]),a._v(" Verify Database Connectivity")]),a._v(" "),t("ul",[t("li",[a._v("Test connectivity using "),t("code",[a._v("telnet <EC2-ip> 3306")]),a._v(" from your system")])]),a._v(" "),t("h3",{attrs:{id:"s3-bucket-configuration-for-bagisto"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#s3-bucket-configuration-for-bagisto"}},[a._v("#")]),a._v(" S3 Bucket Configuration for Bagisto")]),a._v(" "),t("h4",{attrs:{id:"create-s3-bucket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-s3-bucket"}},[a._v("#")]),a._v(" Create S3 Bucket")]),a._v(" "),t("ul",[t("li",[a._v("Follow the documentation "),t("a",{attrs:{href:"https://bagisto.com/en/s3-bucket-and-policy-setup-for-bagisto-amazon-s3-extension",target:"_blank",rel:"noopener noreferrer"}},[a._v("S3 Bucket and Policy Setup for Bagisto"),t("OutboundLink")],1),a._v(" to create an S3 bucket.")])]),a._v(" "),t("h4",{attrs:{id:"configure-iam-role-for-s3-access"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-iam-role-for-s3-access"}},[a._v("#")]),a._v(" Configure IAM Role for S3 Access")]),a._v(" "),t("ul",[t("li",[a._v("Create an IAM role with the required permissions to allow Bagisto to interact with S3. Use the Access Key ID, Secret Key, Bucket Name, Region, and Bucket URL.")])]),a._v(" "),t("h3",{attrs:{id:"bagisto-server-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bagisto-server-setup"}},[a._v("#")]),a._v(" Bagisto Server Setup")]),a._v(" "),t("h4",{attrs:{id:"launch-ec2-instance-for-bagisto-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#launch-ec2-instance-for-bagisto-application"}},[a._v("#")]),a._v(" Launch EC2 Instance for Bagisto Application")]),a._v(" "),t("ul",[t("li",[a._v("Launch a new EC2 instance for the Bagisto application.")])]),a._v(" "),t("h4",{attrs:{id:"install-mysql-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-mysql-client"}},[a._v("#")]),a._v(" Install MySQL Client")]),a._v(" "),t("ul",[t("li",[a._v("SSH into the EC2 instance and install the MySQL client:")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mysql-client-8.0\n")])])]),t("h4",{attrs:{id:"install-bagisto"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-bagisto"}},[a._v("#")]),a._v(" Install Bagisto")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Follow the steps from the "),t("a",{attrs:{href:"https://cloudkul.com/blog/how-to-setup-bagisto-on-aws/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bagisto setup guide on AWS"),t("OutboundLink")],1),a._v(" but skip step 7 (Install MySQL Server) as it is already done in the dedicated DB server.")])]),a._v(" "),t("li",[t("p",[a._v("Use the latest "),t("a",{attrs:{href:"https://getcomposer.org/download/",target:"_blank",rel:"noopener noreferrer"}},[a._v("composer commands"),t("OutboundLink")],1)])])]),a._v(" "),t("h4",{attrs:{id:"configure-bagisto-database-connection"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-bagisto-database-connection"}},[a._v("#")]),a._v(" Configure Bagisto Database Connection")]),a._v(" "),t("ul",[t("li",[a._v("Use the following database details:\n"),t("ul",[t("li",[a._v("Host: "),t("code",[a._v("<public IP of dedicated DB server>")])]),a._v(" "),t("li",[a._v("User: "),t("code",[a._v("bagistouser")])]),a._v(" "),t("li",[a._v("Dbname: "),t("code",[a._v("bagistodb")])]),a._v(" "),t("li",[a._v("Password: "),t("code",[a._v("<your-db-password>")])])])])]),a._v(" "),t("h4",{attrs:{id:"install-s3-integration-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-s3-integration-module"}},[a._v("#")]),a._v(" Install S3 Integration Module")]),a._v(" "),t("ul",[t("li",[a._v("Install and configure the S3 module for Bagisto using the IAM credentials.")])]),a._v(" "),t("h4",{attrs:{id:"access-bagisto-admin-panel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#access-bagisto-admin-panel"}},[a._v("#")]),a._v(" Access Bagisto Admin Panel")]),a._v(" "),t("ul",[t("li",[a._v("Visit the admin panel at: "),t("code",[a._v("http://<this-ec2-public-ip>/admin")]),a._v(" to complete configurations.")])]),a._v(" "),t("h3",{attrs:{id:"create-ami-for-bagisto-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-ami-for-bagisto-application"}},[a._v("#")]),a._v(" Create AMI for Bagisto Application")]),a._v(" "),t("h4",{attrs:{id:"create-ami-from-bagisto-ec2-instance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-ami-from-bagisto-ec2-instance"}},[a._v("#")]),a._v(" Create AMI from Bagisto EC2 Instance")]),a._v(" "),t("ul",[t("li",[a._v("Go to "),t("strong",[a._v("Instances > Actions > Image and templates > Create Image")]),a._v(".")])]),a._v(" "),t("p",[t("img",{attrs:{src:e(257),alt:"Create Image"}})]),a._v(" "),t("ul",[t("li",[a._v("Enter the image name and click "),t("strong",[a._v("Create Image")]),a._v(".")])]),a._v(" "),t("h4",{attrs:{id:"wait-for-ami-to-be-available"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wait-for-ami-to-be-available"}},[a._v("#")]),a._v(" Wait for AMI to Be Available")]),a._v(" "),t("ul",[t("li",[a._v("Monitor the status of the AMI in the AMI section.")])]),a._v(" "),t("h4",{attrs:{id:"launch-instances-from-ami"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#launch-instances-from-ami"}},[a._v("#")]),a._v(" Launch Instances from AMI")]),a._v(" "),t("ul",[t("li",[a._v("Once the AMI is available, go to AMIs and launch as many instances as required in the target group.")])]),a._v(" "),t("h3",{attrs:{id:"configure-target-group"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-target-group"}},[a._v("#")]),a._v(" Configure Target Group")]),a._v(" "),t("h4",{attrs:{id:"create-target-group"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-target-group"}},[a._v("#")]),a._v(" Create Target Group")]),a._v(" "),t("ul",[t("li",[a._v("Go to Target Groups and click Create Target Group.")]),a._v(" "),t("li",[a._v("Choose Instances as the target type and give it a name.")])]),a._v(" "),t("p",[t("img",{attrs:{src:e(258),alt:"Target Group"}})]),a._v(" "),t("h4",{attrs:{id:"register-instances-in-the-target-group"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#register-instances-in-the-target-group"}},[a._v("#")]),a._v(" Register Instances in the Target Group")]),a._v(" "),t("ul",[t("li",[a._v("Choose the instances to be added to the target group")])]),a._v(" "),t("p",[t("img",{attrs:{src:e(259),alt:"Create Target Group"}})]),a._v(" "),t("h4",{attrs:{id:"configure-load-balancing-algorithm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-load-balancing-algorithm"}},[a._v("#")]),a._v(" Configure Load Balancing Algorithm")]),a._v(" "),t("ul",[t("li",[a._v("After creating the target group, go to Attributes and choose the desired load-balancing algorithm (default: round-robin). Enable stickiness.")])]),a._v(" "),t("h3",{attrs:{id:"create-and-configure-application-load-balancer-alb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-and-configure-application-load-balancer-alb"}},[a._v("#")]),a._v(" Create and Configure Application Load Balancer (ALB)")]),a._v(" "),t("h4",{attrs:{id:"create-alb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-alb"}},[a._v("#")]),a._v(" Create ALB")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Go to "),t("strong",[a._v("Load Balancers")]),a._v(" and click "),t("strong",[a._v("Create Load Balancer")]),a._v(".")])]),a._v(" "),t("li",[t("p",[a._v("Choose "),t("strong",[a._v("Application Load Balancer")]),a._v(" and provide the following configurations:")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("Internet-facing")]),a._v(".")]),a._v(" "),t("li",[a._v("Select all "),t("strong",[a._v("Availability Zones")]),a._v(".")]),a._v(" "),t("li",[a._v("Choose the target group created earlier and configure the listener on "),t("strong",[a._v("port 80 (HTTP)")]),a._v(".")])])])]),a._v(" "),t("p",[t("img",{attrs:{src:e(260),alt:"Create Load Balancer"}})]),a._v(" "),t("p",[t("img",{attrs:{src:e(261),alt:"Create Load Balancer"}})]),a._v(" "),t("p",[t("img",{attrs:{src:e(262),alt:"Create Load Balancer"}})]),a._v(" "),t("h4",{attrs:{id:"adjust-security-groups"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adjust-security-groups"}},[a._v("#")]),a._v(" Adjust Security Groups")]),a._v(" "),t("ul",[t("li",[a._v("Modify the security groups to allow necessary traffic (e.g., HTTP/HTTPS).")])]),a._v(" "),t("h4",{attrs:{id:"verify-load-balancer-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verify-load-balancer-configuration"}},[a._v("#")]),a._v(" Verify Load Balancer Configuration")]),a._v(" "),t("ul",[t("li",[a._v("Copy the "),t("strong",[a._v("DNS name")]),a._v(" of the load balancer and verify it.")]),a._v(" "),t("li",[a._v("Configure the "),t("strong",[a._v("domain name")]),a._v(" (CNAME) to point to this load balancer DNS for production use.")])]),a._v(" "),t("h4",{attrs:{id:"set-up-ssl-on-load-balancer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-up-ssl-on-load-balancer"}},[a._v("#")]),a._v(" Set Up SSL on Load Balancer")]),a._v(" "),t("ul",[t("li",[a._v("Configure the ALB listener to use HTTPS (port 443), ensuring that an SSL certificate is installed.")])]),a._v(" "),t("p",[t("img",{attrs:{src:e(263),alt:"Load Balancer Result"}})]),a._v(" "),t("h3",{attrs:{id:"verify-and-test-the-entire-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verify-and-test-the-entire-setup"}},[a._v("#")]),a._v(" Verify and Test the Entire Setup")]),a._v(" "),t("h4",{attrs:{id:"test-load-balancer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test-load-balancer"}},[a._v("#")]),a._v(" Test Load Balancer")]),a._v(" "),t("ul",[t("li",[a._v("Confirm that the load balancer is distributing traffic across the registered instances.")])]),a._v(" "),t("h4",{attrs:{id:"verify-domain-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verify-domain-configuration"}},[a._v("#")]),a._v(" Verify Domain Configuration")]),a._v(" "),t("ul",[t("li",[a._v("Ensure the domain is resolving correctly to the load balancer.")])]),a._v(" "),t("h4",{attrs:{id:"test-bagisto-functionality"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#test-bagisto-functionality"}},[a._v("#")]),a._v(" Test Bagisto Functionality")]),a._v(" "),t("ul",[t("li",[a._v("Access the Bagisto application and verify that the S3 integration is working, the application can connect to the MySQL database, and all features are functional.")])]),a._v(" "),t("p",[t("strong",[a._v("Bagisto with ALB Setup on AWS is Successfully Configured!")])]),a._v(" "),t("p",[a._v("The Bagisto application is now running behind an Application Load Balancer (ALB) with a dedicated MySQL database and S3 integration for storage. The load balancer is efficiently distributing traffic across multiple instances, ensuring high availability and scalability.")])])}),[],!1,null,null,null);t.default=r.exports}}]);